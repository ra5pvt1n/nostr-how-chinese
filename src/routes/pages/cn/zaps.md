---
title: 打闪是什么？
description: 了解打闪是什么、它们如何运作以及在 Nostr 客户端上如何使用它们。
---

## [§](#基础) 基础

最简单的类比是打赏小费。通过[闪电网络](https://www.investopedia.com/terms/l/lightning-network.asp)以光速传输的小费，基本没有交易费用。

从 Nostr 协议开始，在笔记中就经常能看到闪电发票。自 [NIP-57](https://github.com/nostr-protocol/nips/blob/master/57.md) 实施以来，打闪已成为 Nostr 笔记中传递价值的主要方式。让我们仔细看看 NIP-57 实现了什么以及打闪是如何运作的。

## [§](#nip-57) NIP-57

[NIP-57](https://github.com/nostr-protocol/nips/blob/master/57.md) 是描述打闪应该如何实现的文档。它创建了两种新的笔记，种类 9735（打闪）和种类 9734（打闪请求）。通过这两种笔记，Nostr 客户端可以从 LNURL 服务器请求打闪发票并进行支付。NIP-57 规范还描述了接收打闪付款的闪电钱包应如何创建要发送到中继器的笔记。

💡 有趣的小知识：为打闪所选的笔记类型与闪电使用的网络端口（9735）相同。

## [§](#打闪是如何运作的) 打闪是如何运作的

![打闪流程图](/images/zap-flow.webp)

我们不会在这里深入探讨技术问题，但出于好奇，让我们来看看打闪的基本工作原理。

1. 当你点击客户端（达摩、Iris、Amethyst 等）中的小 ⚡ 图标时，发生的第一件事是客户端会 ping 你想打闪的人的闪电钱包之前的 [LNURL 服务器](https://thebitcoinmanual.com/articles/what -is-ln-url-and-how-does-it-work/)。第一个请求是：“你好，我很乐意给 Alice 发送一些聪。”
1. 随后 LNURL 服务器会响应，如果 Alice 的钱包支持打闪，它会告诉客户端并发送/确认 Alice 的公钥。
1. 这一刻，客户端会准备一个打闪请求（一条9734类的笔记），其中包含了相关它想打闪的个人档案或笔记的数据、金额、应传播到哪些中继器和一些其他信息。这实际上从 LNURL 服务器请求了一张发票。
1. LNURL 服务器以所求的发票作为响应。
1. 此时，客户会将发票交给用户的闪电钱包进行支付。如果你在浏览器中使用像 Alby 这样的钱包（并设置了预算），这个过程会执行得很快。
1. 一旦用户直接支付了他们打闪的人的钱包，接收方的钱包将创建一条9735类笔记，然后将其传播到之前在打闪请求中所指定的中继器。
1. 收到此笔记的中继器将打闪告知给连接的客户端。客户端通过用户界面把打闪呈现给用户。

而这一切都在短短几秒钟内发生，而且只花费一分都不到的钱。

## [§](#如何发送和接收) 如何发送和接受打闪？

要在 Nostr 上打闪他人，你只需要两件东西：

1. 一个有打闪功能的闪电钱包（例如 [Alby](https://getalby.com/) 或 [Wallet of Satoshi](https://www.walletofsatoshi.com/))
1. 一个已实施打闪的客户端（例如[达摩](/cn/guides/damus)、[Amethyst](/cn/guides/amethyst)、[Iris](/cn/guides/iris) 或 [Snort](https://snort.social))

唯一需要做的另一件事是确保在你的 Nostr 个人档案中设置了闪电地址。这是你接收打闪的地址。

请注意，除了你在个人档案中设置的用于接收打闪的地址之外，你还可以通过其他的钱包/地址支付打闪。

例如，假设如下：

1. 你在你的 Nostr 个人档案中设置了 [Stacker News](https://stacker.news/) 闪电地址，这是你将接收到任何被打闪给你的聪的地址。
1. 在你的浏览器中，你使用 Iris 作为你的客户端，并通过他们的 chrome 扩展使用你的 Alby 钱包支付打闪。
1. 在移动设备上，你使用达摩作为你的客户端，并使用 Wallet of Statoshi 应用程序支付打闪。